<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8 />
    <title>Delayed modal demo</title>
    <link rel="stylesheet" href="https://cdn.rawgit.com/jackmoore/colorbox/master/example1/colorbox.css" />
    <link href="css/custom.css" rel="stylesheet">
  </head>
  <body>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <script src="https://cdn.rawgit.com/jackmoore/colorbox/master/jquery.colorbox-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.3/js.cookie.min.js"></script>


    <div id="modal-content">
      <h2>Register n' stuff!</h2>
      <label for="yurEmail">Yur Email Adress:</label>
      <input placeholder="I needz it" id="yurEmail">
      <button class="button order-cheezburger">Order Cheezburger</button>
    </div>

    <script>

      var lastFocus;

      function onPopupOpen() {
        $("#myInput").focus();
        $("#modal-content").show();
      }

      function onPopupClose() {
        $("#modal-content").hide();
        Cookies.set('colorboxShown','yes', { expires: 1 });
        lastFocus.focus();
      }

      function displayPopup(){
        $.colorbox({
          inline: true,
          href: "#modal-content",
          className: "cta",
          opacity: .4,
          width: 320,
          height: 320,
          onComplete: onPopupOpen,
          onClosed: onPopupClose
        });
      }

      setTimeout(function(){
        var popupShown = Cookies.get('colorboxShown');

        if (popupShown){
          console.log("Cookie found. No action necessary");
        } else {
          lastFocus = document.activeElement;
          displayPopup();
        }
      }, 2000);

    </script>



  </body>
</html>
